"use strict";(globalThis["webpackChunkmaghfirah"]=globalThis["webpackChunkmaghfirah"]||[]).push([[532],{4532:(t,e,o)=>{o.r(e),o.d(e,{default:()=>Y});var s=o(9835);const l={key:0,class:"col-12 justify-start row"},a=(0,s._)("div",{class:"text-h5 text-bold col-12"},null,-1),i={class:"col-12 q-mb-xl text-bold text-h6"},n={class:"col-12"},r=(0,s._)("small",{class:"col-12 text-weight-light"},"Username ",-1),c={class:"col-12"},u=(0,s._)("small",{class:"col-12 text-weight-light"},"Password ",-1),d={class:"col-12 row q-mt-xl"},m=(0,s._)("div",{class:"col-12 justify-between row q-mt-sm q-mb-lg"},[(0,s._)("small",{class:"text-weight-bold"})],-1),p=(0,s._)("div",{class:"col-12 justify-around row text-weight-light q-mt-sm"},null,-1);function h(t,e,o,h,g,w){const f=(0,s.up)("cms-paragraph"),x=(0,s.up)("q-input"),b=(0,s.up)("q-icon"),y=(0,s.up)("q-btn"),v=(0,s.up)("Forgot"),_=(0,s.up)("VerificationOtp"),k=(0,s.up)("q-form");return(0,s.wg)(),(0,s.j4)(k,{class:"text-h6 col-12 items-center row justify-center bg-primary q-py-xl q-px-md text-white",style:{"border-radius":"24px 24px 0 0"},onSubmit:w.login},{default:(0,s.w5)((()=>["login"==g.type?((0,s.wg)(),(0,s.iD)("div",l,[a,(0,s._)("div",i,[(0,s.Wm)(f,{title:"Hai.. Asslamualaikum ",description:"Silakan masukan akun anda dibawah ini."})]),(0,s._)("div",n,[r,(0,s.Wm)(x,{outlined:"",class:"col-12",color:"primary","bg-color":"white",modelValue:g.dataModel.username,"onUpdate:modelValue":e[0]||(e[0]=t=>g.dataModel.username=t),placeholder:"08123456789",style:{"border-radius":"24px !important"}},null,8,["modelValue"])]),(0,s._)("div",c,[u,(0,s.Wm)(x,{outlined:"",class:"col-12",color:"primary","bg-color":"white",modelValue:g.dataModel.password,"onUpdate:modelValue":e[2]||(e[2]=t=>g.dataModel.password=t),type:g.isPwd?"password":"text",placeholder:"Password"},{append:(0,s.w5)((()=>[(0,s.Wm)(b,{name:g.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=t=>g.isPwd=!g.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"])]),(0,s._)("div",d,[(0,s.Wm)(y,{label:"Login",class:"col-12 bg-white",size:"lg",noCaps:"",flat:"",color:"primary",type:"submit",onClick:w.login,style:{"border-radius":"12px"}},null,8,["onClick"])]),m,p])):(0,s.kq)("",!0),"forgot"==g.type?((0,s.wg)(),(0,s.j4)(v,{key:1,modelValue:t.username,"onUpdate:modelValue":e[3]||(e[3]=e=>t.username=e),onForgot:w.forgot},null,8,["modelValue","onForgot"])):(0,s.kq)("",!0),"verification"==g.type?((0,s.wg)(),(0,s.j4)(_,{key:2,onVerification:w.vericationOtp,dataOtp:g.otp},null,8,["onVerification","dataOtp"])):(0,s.kq)("",!0)])),_:1},8,["onSubmit"])}o(9665);const g={class:"col-12 justify-start row"},w=(0,s._)("div",{class:"text-h5 text-bold col-12"},"Lupa Password",-1),f=(0,s._)("div",{class:"col-12 text-weight-regular q-mb-xl"},[(0,s._)("small",null,"Silakan masukan nomor telepon anda untuk mengirim password yang baru")],-1),x={class:"col-12"},b=(0,s._)("small",{class:"col-12 text-weight-light"},"Nomor Telepon ",-1),y={class:"col-12 row q-mt-xl"},v=(0,s._)("div",{class:"col-12 justify-between row q-mt-sm q-mb-lg"},[(0,s._)("small",{class:"text-weight-bold"})],-1),_=(0,s._)("div",{class:"col-12 justify-around row text-weight-light q-mt-sm"},[(0,s._)("small",{class:"col-12 row text-weight-light justify-center q-mt-md"},"2023 @ PT. Kafilah Maghfirah Wisata")],-1);function k(t,e,o,l,a,i){const n=(0,s.up)("q-input"),r=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.iD)("div",g,[w,f,(0,s._)("div",x,[b,(0,s.Wm)(n,{outlined:"",class:"col-12",color:"info","bg-color":"white",placeholder:" 08123456789",style:{"border-radius":"24px !important"},"model-value":o.modelValue,"onUpdate:modelValue":e[0]||(e[0]=e=>t.$emit("update:modelValue",e))},null,8,["model-value"])]),(0,s._)("div",y,[(0,s.Wm)(r,{label:"Kirim Password",class:"col-12 bg-white",size:"lg",noCaps:"",flat:"",color:"info",type:"button",onClick:e[1]||(e[1]=e=>t.$emit("forgot"))})]),v,_])}const q={name:"ForgotPassword",props:["modelValue"],data(){return{}}};var V=o(1639),$=o(3119),j=o(8879),H=o(9984),M=o.n(H);const P=(0,V.Z)(q,[["render",k]]),Z=P;M()(q,"components",{QInput:$.Z,QBtn:j.Z});var O=o(6970);const C={key:0,class:"col-10 items-center row justify-center text-white"},S={class:"col-12 justify-start row"},W=(0,s._)("div",{class:"text-h6 text-bold col-12"},"Verifikasi",-1),F={class:"col-12 text-weight-regular q-mb-lg",style:{"font-size":"16px"}},Q={class:"col-12 row justify-around q-my-md"},U={class:"col-12 q-mb-sm text-weight-regular"},K=(0,s._)("div",{class:"col-12 row q-mt-xl"},null,-1),L=(0,s._)("div",{class:"col-12 text-weight-regular absolute-top-left"},null,-1);function z(t,e,o,l,a,i){const n=(0,s.up)("q-input"),r=(0,s.up)("q-form");return o.dataOtp?((0,s.wg)(),(0,s.iD)("div",C,[(0,s._)("div",S,[W,(0,s._)("div",F," Kami sudah mengirimkan kode verifikasi via Whatsapp dengan nomor ("+(0,O.zw)(o.dataOtp.phone)+"). Silahkan periksa pesan masuk anda. ",1),(0,s.Wm)(r,{class:"col-12"},{default:(0,s.w5)((()=>[(0,s._)("div",Q,[(0,s._)("div",U,"Kirim Sebelum "+(0,O.zw)(o.dataOtp.countExpire),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.otp,((t,e)=>((0,s.wg)(),(0,s.j4)(n,{key:e,maxlength:"1",outlined:"",style:{width:"50px"},color:"info","bg-color":"white",onKeyup:()=>{i.checkFileds(),i.focusNext(e+1,a.otp[e])},modelValue:a.otp[e],"onUpdate:modelValue":t=>a.otp[e]=t,class:(0,O.C_)(`otp-${e}`),"input-style":"font-weight:bold; text-align:center"},null,8,["onKeyup","modelValue","onUpdate:modelValue","class"])))),128))])])),_:1}),K,L])])):(0,s.kq)("",!0)}const D={name:"VerificationUsers",props:["dataOtp"],data(){return{otp:["","","",""]}},methods:{focusNext(t,e){const o=document.getElementsByClassName(`otp-${t}`);if(e.length>0&&o&&o[0])return o[0].focus()},checkFileds(){let t=!0;this.otp.forEach((e=>{""!=e&&null!=e||(t=!1)})),1==t&&this.$emit("verification",this.otp.join(""))}}};var I=o(8326);const B=(0,V.Z)(D,[["render",z]]),E=B;M()(D,"components",{QForm:I.Z,QInput:$.Z,QBtn:j.Z});const N={name:"LoginAll",components:{Forgot:Z,VerificationOtp:E},created(){},data(){return{dataModel:{username:"",password:""},isPwd:!0,type:"login",otp:null}},methods:{login(){this.$api.post("login",this.dataModel,((t,e,o,s)=>{if(200==e)if(this.$Handle.setLS("_user",t.users),this.$Handle.setLS("_token",t.token),this.$Handle.successMessage(o),1==t.users.is_customer)this.$router.push({name:"cms-jamaah-index"});else if(void 0!=t.users.role.master_menu.menu_details[0]){let e=t.users.role.master_menu.menu_details[0];this.$router.push({name:e.menu.path})}}),(t=>{for(const[e,o]of Object.entries(t))this.$Handle.errorMessage(`${o}`)}))},forgot(){this.$api.post("forgot",{username:this.username},((t,e,o,s)=>{200==e&&(this.otp=t,null!=this.otp&&(this.type="verification",setInterval((()=>{this.otp.countExpire=this.$Help.countingDown(this.otp.expired)}),1e3)))}),(t=>{this.$Handle.errorMessage(t)}))},vericationOtp(t){let e={otp:t,phone:this.otp.phone};this.$api.post("otp-verification",e,((t,e,o,s)=>{200==e&&(this.$Handle.setLS("_user",t.users),this.$Handle.setLS("_token",t.token),this.$Handle.successMessage(o),this.$router.push({name:"cms-jamaah-index",query:{param:"newPassword"}}))}),(t=>{this.$Handle.errorMessage(t)}))}}};var T=o(2857);const A=(0,V.Z)(N,[["render",h]]),Y=A;M()(N,"components",{QForm:I.Z,QInput:$.Z,QIcon:T.Z,QBtn:j.Z})}}]);